{% comment %} 
  Simple Quote Button - Test version ƒë·ªÉ debug
{% endcomment %}

<script>
console.log('Quote Button Script Loading...');

document.addEventListener('DOMContentLoaded', function() {
  console.log('DOM Content Loaded - Quote Button');
  console.log('Current URL:', window.location.pathname);
  
  // Test v·ªõi t·∫•t c·∫£ trang, kh√¥ng ch·ªâ product
  // if (!window.location.pathname.includes('/products/')) return;
  
  // T·∫°o n√∫t quote ƒë∆°n gi·∫£n tr∆∞·ªõc
  const simpleQuoteHtml = `
    <div style="margin: 20px 0; text-align: center; background: #f0f0f0; padding: 10px; border: 2px dashed #ccc;">
      <h3>QUOTE BUTTON TEST</h3>
      <button 
        style="
          background-color: #ff6600; 
          color: white; 
          padding: 15px 30px; 
          border: none; 
          border-radius: 8px; 
          font-size: 16px; 
          font-weight: bold;
          cursor: pointer;
        "
        onclick="alert('Quote button clicked! This is working!')"
      >
        üõí REQUEST QUOTE NOW
      </button>
      <p style="font-size: 12px; color: #666;">Debug: Script loaded successfully</p>
    </div>
  `;
  
  console.log('Trying to find insertion point...');
  
  // Th·ª≠ nhi·ªÅu c√°ch t√¨m v·ªã tr√≠ ch√®n
  let insertionPoint = null;
  
  // C√°ch 1: T√¨m Add to Cart button
  insertionPoint = document.querySelector('button[name="add"], [data-testid="add-to-cart"], .btn-product-add, form[action*="/cart/add"] button[type="submit"]');
  
  if (insertionPoint) {
    console.log('Found Add to Cart button:', insertionPoint);
    insertionPoint.parentNode.insertAdjacentHTML('afterend', simpleQuoteHtml);
  } else {
    // C√°ch 2: T√¨m product form
    insertionPoint = document.querySelector('form[action*="/cart/add"], .product-form, .product-single');
    
    if (insertionPoint) {
      console.log('Found product form:', insertionPoint);
      insertionPoint.insertAdjacentHTML('afterend', simpleQuoteHtml);
    } else {
      // C√°ch 3: Ch√®n v√†o body n·∫øu kh√¥ng t√¨m th·∫•y g√¨
      console.log('No specific element found, inserting into body');
      document.body.insertAdjacentHTML('beforeend', simpleQuoteHtml);
    }
  }
  
  console.log('Quote button insertion completed');
  
  // Test metafield data
  {% if shop.metafields.quote_snap.configuration %}
    console.log('Shop metafield found:', {{ shop.metafields.quote_snap.configuration | json }});
  {% else %}
    console.log('No shop metafield found');
  {% endif %}
  
  {% if product.metafields.quote_snap.configuration %}
    console.log('Product metafield found:', {{ product.metafields.quote_snap.configuration | json }});
  {% else %}
    console.log('No product metafield found');
  {% endif %}
  
  // Test product data availability
  {% if product %}
    console.log('Product data:', {
      id: {{ product.id | json }},
      title: {{ product.title | json }},
      handle: {{ product.handle | json }}
    });
  {% else %}
    console.log('No product data available');
  {% endif %}
});
</script>

{% schema %}
{
  "name": "Quote Button Test",
  "target": "head",
  "templates": ["product", "index", "collection"],
  "settings": [
    {
      "type": "paragraph",
      "content": "This is a simple test version of the quote button to debug display issues."
    }
  ]
}
{% endschema %}
